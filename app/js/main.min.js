"use strict";document.addEventListener("DOMContentLoaded",function(){const e=["map-modal","map-modal-mob","map-modal-stock","filter-map-modal","map-modal2","map-modal3","map-modal4","map-modal5","address-map"];function o(t,o){o&&(t.classList.contains("open")?$(o).animate({maxHeight:"100%",opacity:1},200):$(o).animate({maxHeight:"0px",opacity:0},200),t.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("open"),t.classList.contains("open")?$(o).animate({maxHeight:"100%",opacity:1},200):$(o).animate({maxHeight:"0px",opacity:0},200)}))}ymaps.ready(function(){e.forEach(function(l){if(!document.getElementById(l))return!1;let o=new ymaps.Map(l,{center:[55.76,37.64],zoom:7});o.controls.remove("geolocationControl"),o.controls.remove("searchControl"),o.controls.remove("trafficControl"),o.controls.remove("typeSelector"),o.controls.remove("fullscreenControl"),o.controls.remove("rulerControl"),o.behaviors.disable(["scrollZoom"]),o.behaviors.disable(["drag"]);[{active:!1,id:"1",point:[55,38]},{active:!1,id:"2",point:[55,39]},{active:!1,id:"3",point:[55,40]},{active:!1,id:"4",point:[55,41]},{active:!1,id:"5",point:[55,42]}].forEach(function(e){let t=new ymaps.Placemark(e.point,{},{iconImageHref:e.active?"img/pin-red.svg":"img/pin-block.svg",iconImageSize:[41,41],iconLayout:"default#imageWithContent",iconShape:{coordinates:[[-10,-10],[41,41]],type:"Rectangle"}});t.events.add("click",function(e){var t=document.getElementById("tech-service-popup-map"),o=document.getElementById("jsService"),r=document.querySelector(".shops-page"),s=document.getElementById("tech-service-selected");"map-modal"!=l||t?"map-modal"==l&&t||"map-modal3"==l&&s?document.querySelector("#tech-service-selected").classList.add("open"):"map-modal2"==l&&o?"img/pin-red.svg"==e.get("target").options.get("iconImageHref")?(e.get("target").options.set("iconImageHref","img/pin-block.svg"),document.getElementById(l).classList.remove("selected"),document.querySelector("#jsService .shop-item:nth-child(1) .in-stock__content").classList.remove("b-b-none"),document.querySelector("#jsService .shop-item:nth-child(2)").classList.remove("selected")):(e.get("target").options.set("iconImageHref","img/pin-red.svg"),document.getElementById(l).classList.add("selected"),console.log("testMark"),document.querySelector("#jsService .shop-item:nth-child(1) .in-stock__content").classList.add("b-b-none"),document.querySelector("#jsService .shop-item:nth-child(2)").classList.add("selected")):"map-modal2"==l&&r?"img/pin-red.svg"==e.get("target").options.get("iconImageHref")?(e.get("target").options.set("iconImageHref","img/pin-block.svg"),document.getElementById(l).classList.remove("selected"),document.querySelector(".shops-page .shop-item:nth-child(1) .in-stock__content").classList.remove("b-b-none"),document.querySelector(".shops-page .shop-item:nth-child(2)").classList.remove("selected")):(e.get("target").options.set("iconImageHref","img/pin-red.svg"),document.getElementById(l).classList.add("selected"),console.log("testMark"),document.querySelector(".shops-page .shop-item:nth-child(1) .in-stock__content").classList.add("b-b-none"),document.querySelector(".shops-page .shop-item:nth-child(2)").classList.add("selected")):"img/pin-red.svg"==e.get("target").options.get("iconImageHref")?(e.get("target").options.set("iconImageHref","img/pin-block.svg"),document.getElementById(l).classList.remove("selected")):(e.get("target").options.set("iconImageHref","img/pin-red.svg"),document.getElementById(l).classList.add("selected")):(document.querySelector("#jsInStockShopModal")?.classList.add("open"),document.querySelector("body")?.classList.add("overflow-hidden"),document.querySelector("html")?.classList.add("overflow-hidden"),document.getElementById("jsOrderingSingle")?.classList.add("open"),document.querySelector(".overlay")?.classList.add("open"),console.log("click"))}),o.geoObjects.add(t)}),"address-map"==l&&(document.querySelectorAll("[data-placemark]").forEach(e=>{e.addEventListener("mouseover",function(){o.geoObjects.get(e.getAttribute("data-placemark"));o.geoObjects.get(e.getAttribute("data-placemark")).options.set("iconImageHref","img/pin-red.svg")})}),document.querySelectorAll("[data-placemark]").forEach(e=>{e.addEventListener("mouseout",function(){o.geoObjects.each(function(e){e.options.set("iconImageHref","img/pin-block.svg")})})}))})});const t=document.querySelectorAll(".accordion"),r=document.querySelectorAll(".filters__box");t.forEach(function(e){var t=e.querySelector(".accordion__content");o(e,t)}),r.forEach(function(e){var t=e.closest(".filters__item").querySelector(".filters__content");o(e,t)}),document.querySelectorAll(".filters__item--accordion .filters__header").forEach(e=>{const t=e.closest(".filters__item--accordion");o(e,t.querySelector(".filters__content"))});const s=new Swiper(".swiper-spares",{direction:"horizontal",slidesPerView:"auto",watchSlidesProgress:!0,breakpoints:{320:{spaceBetween:16},576:{spaceBetween:40}}}).on("slideChange",function(e){let t=document.querySelectorAll(".spares__names ul li");t.forEach(e=>{e.classList.remove("active")}),t[e.activeIndex].classList.add("active")}),l=document.querySelectorAll(".spares__names li");l.forEach(t=>{let e=t.querySelector("a");e?.addEventListener("click",function(e){e.preventDefault();e=[...t.parentElement.children].indexOf(t);s.slideTo(e)})}),new Swiper(".car-service-slider",{direction:"horizontal",slidesPerView:"auto",spaceBetween:16});window.addEventListener("scroll",function(){200<this.pageYOffset?document.querySelector(".header").classList.add("fixed"):document.querySelector(".header").classList.remove("fixed")}),$(".js-range-slider").ionRangeSlider({type:"double",min:0,max:1e3,from:0,to:500,hide_min_max:!0,hide_from_to:!0,onChange:function(e){$(".jsPriceFrom").val(e.from),$(".jsPriceTo").val(e.to)}});const c=$(".js-range-slider").data("ionRangeSlider");document.querySelector(".jsPriceFrom")?.addEventListener("input",function(e){e.target.value=this.value.replace(/[^\d]/g,""),c.update({from:e.target.value})}),document.querySelector(".jsPriceTo")?.addEventListener("input",function(e){e.target.value=this.value.replace(/[^\d]/g,""),c.update({to:e.target.value})}),document.querySelectorAll(".jsCloseStateForm").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),t.closest(".state-form").classList.remove("open"),document.querySelector(".overlay").classList.remove("open"),document.querySelector("body").classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden")})}),document.querySelectorAll(".jsCounter").forEach(t=>{let o=t.querySelector("span"),e=t.querySelector(".quantity-icon--minus"),r=t.querySelector(".quantity-icon--plus");e.addEventListener("click",function(){var e=parseInt(o.textContent);1!==e?o.textContent=e-1:t.classList.remove("show")}),r.addEventListener("click",function(){var e=parseInt(o.textContent);99!==e&&(o.textContent=e+1)})}),new Swiper(".product__card-gallery-slider",{slidesPerView:4,spaceBetween:16,wrapperClass:"product__card-slider-wrapper",slideClass:"product__card-slide",direction:"vertical",navigation:{nextEl:".product__card-gallery-prev",prevEl:".product__card-gallery-next"},pagination:{el:".product__card-gallery-pagination",clickable:!0},breakpoints:{0:{slidesPerView:1,direction:"horizontal",allowTouchMove:!0,spaceBetween:0,slidesPerGroup:1},769:{slidesPerView:4,direction:"vertical",allowTouchMove:!1,spaceBetween:16}}}),document.querySelectorAll(".product__card-slide").forEach(o=>{o.addEventListener("click",function(e){var t=o.querySelector("img").getAttribute("src");document.querySelector(".product__card-gallery-main img").setAttribute("src",t)})});const n=document.querySelectorAll(".sale__slider.sale__slider--mob");window.screen.width<991?n.forEach((e,t)=>{new Swiper(e,{slidesPerView:"3",wrapperClass:"sale__slider-wrapper",slideClass:"sale__grid-item",allowTouchMove:!0,slidesPerGroup:"3",navigation:{nextEl:".product__slider-nav-wrapper .product__slider-next-1",prevEl:".product__slider-nav-wrapper .product__slider-prev-1"},pagination:{el:".sale__slider .product__slider-pagination-1",clickable:!0},breakpoints:{0:{slidesPerView:"1.18",slidesPerGroup:1,spaceBetween:13,allowTouchMove:!0},769:{slidesPerView:"1",slidesPerGroup:1,spaceBetween:0},992:{slidesPerView:"3",slidesPerGroup:3,allowTouchMove:!0,spaceBetween:0}}})}):n.forEach((e,t)=>{new Swiper(e,{slidesPerView:"3",wrapperClass:"sale__slider-wrapper",slideClass:"sale__grid-item",allowTouchMove:!1,slidesPerGroup:3,navigation:{nextEl:".product__slider-nav-wrapper .product__slider-next-1",prevEl:".product__slider-nav-wrapper .product__slider-prev-1"},pagination:{el:".product__slider-nav-wrapper .product__slider-pagination-1",renderBullet:function(e,t){return"<span class='product__slider-bullet "+t+"'>"+(e+1)+"</span>"},clickable:!0},breakpoints:{0:{slidesPerView:"1.18",spaceBetween:13,slidesPerGroup:1},769:{slidesPerView:"1",slidesPerGroup:1,spaceBetween:0},992:{slidesPerView:"3",slidesPerGroup:3,spaceBetween:0}}})});const i=document.querySelectorAll(".sale__slider.sale__slider--desktop");i.forEach((e,t)=>{new Swiper(e,{slidesPerView:"1",wrapperClass:"sale__slider-wrapper",slideClass:"sale__slide-item",allowTouchMove:!1,slidesPerGroup:1,navigation:{nextEl:".product__slider-nav-wrapper .product__slider-next-2",prevEl:".product__slider-nav-wrapper .product__slider-prev-2"}})});const a=document.querySelectorAll(".sale__slider.sale__slider--blog");a.forEach((e,t)=>{new Swiper(e,{slidesPerView:"3",wrapperClass:"sale__slider-wrapper",slideClass:"sale__grid-item",allowTouchMove:!1,slidesPerGroup:3,navigation:{nextEl:".product__slider-nav-wrapper .product__slider-next-4",prevEl:".product__slider-nav-wrapper .product__slider-prev-4"},pagination:{el:".product__slider-nav-wrapper .product__slider-pagination-4",renderBullet:function(e,t){return"<span class='product__slider-bullet "+t+"'>"+(e+1)+"</span>"},clickable:!0}})});const d=document.querySelectorAll(".sale__slider.sale__slider--blog.sale__slider--blog--mob");d.forEach((e,t)=>{new Swiper(e,{slidesPerView:"1",wrapperClass:"sale__slider-wrapper",slideClass:"sale__grid-item",allowTouchMove:!0,slidesPerGroup:1,navigation:{nextEl:".product__slider-nav-wrapper .product__slider-next-5",prevEl:".product__slider-nav-wrapper .product__slider-prev-5"},pagination:{el:".product__slider-nav-wrapper .product__slider-pagination-5",renderBullet:function(e,t){return"<span class='product__slider-bullet "+t+"'>"+(e+1)+"</span>"},clickable:!0}})});const u=document.querySelectorAll(".product__slider");window.screen.width<991?u.forEach((e,t)=>{console.log(t),new Swiper(e,{slidesPerView:"4",spaceBetween:40,wrapperClass:"product__slider-wrapper",slideClass:"products__grid-item",allowTouchMove:!0,slidesPerGroup:"4",navigation:{nextEl:".product__slider-nav-wrapper .product__slider-next-"+t,prevEl:".product__slider-nav-wrapper .product__slider-prev-"+t},pagination:{el:".product__slider .product__slider-pagination-"+t,clickable:!0},breakpoints:{0:{slidesPerView:"1",slidesPerGroup:1,spaceBetween:16,allowTouchMove:!0},769:{slidesPerView:"2",slidesPerGroup:2,spaceBetween:20},992:{slidesPerView:"4",slidesPerGroup:4,spaceBetween:40,allowTouchMove:!1}}})}):u.forEach((e,t)=>{console.log(t),new Swiper(e,{slidesPerView:"4",spaceBetween:40,wrapperClass:"product__slider-wrapper",slideClass:"products__grid-item",allowTouchMove:!1,slidesPerGroup:4,navigation:{nextEl:".product__slider-nav-wrapper .product__slider-next-"+t,prevEl:".product__slider-nav-wrapper .product__slider-prev-"+t},pagination:{el:".product__slider-nav-wrapper .product__slider-pagination-"+t,renderBullet:function(e,t){return"<span class='product__slider-bullet "+t+"'>"+(e+1)+"</span>"},clickable:!0},breakpoints:{0:{slidesPerView:"1",slidesPerGroup:1},769:{slidesPerView:"2",slidesPerGroup:2},992:{slidesPerView:"4",slidesPerGroup:4}}})});const p=document.querySelectorAll(".shops-inner__list");p.forEach((e,t)=>{new Swiper(e,{slidesPerView:"auto",slidesPerGroup:4,allowTouchMove:!0,slideClass:"shops-inner__ordering-filter-item",wrapperClass:"shops-inner__ordering-filter",breakpoints:{0:{spaceBetween:31},992:{spaceBetween:0}}})});const m=document.querySelectorAll(".dropdown"),v=document.querySelector("body"),_=document.querySelector(".overlay");function h(e,t,o){let r=document.querySelector("#stateForm");o?r.classList.add("success"):r.classList.remove("success");let s=document.querySelector("#stateForm .state-title"),l=document.querySelector("#stateForm .state-text");s.textContent=e,l.textContent=t,r.classList.add("open"),v.classList.add("overflow-hidden"),document.querySelector("html").classList.add("overflow-hidden"),_.classList.add("open")}document.querySelector(".state-form .dropdown__close")?.addEventListener("click",function(){v.classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden"),_.classList.remove("open"),document.querySelector("#stateForm").classList.remove("open")}),document.querySelectorAll("[data-popup]").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),document.getElementById("removeConfim")?.classList.contains("open")&&document.getElementById("removeConfim").classList.remove("open");e=t.getAttribute("data-popup");document.querySelector("#"+e).classList.add("open"),v.classList.add("overflow-hidden"),document.querySelector("html").classList.add("overflow-hidden"),_.classList.add("open")})}),document.querySelectorAll("[data-dropdown]").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".dropdown.open")?.classList.remove("open");e=t.getAttribute("data-dropdown");document.querySelector("#"+e).classList.add("open"),v.classList.add("overflow-hidden"),document.querySelector("html").classList.add("overflow-hidden"),_.classList.add("open")})}),document.querySelectorAll(".jsButtonCloseModal").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),v.classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden");let t=document.querySelectorAll(".modal");_.classList.remove("open"),t.forEach(function(e){e.classList.remove("open")})})}),document.querySelectorAll(".jsButtonBackModal").forEach(function(e){e.addEventListener("click",function(e){let t=this.closest(".modal");t.classList.remove("open")})}),document.querySelectorAll(".jsButtonBackModal").forEach(function(e){e.addEventListener("click",function(e){let t=e.target.closest(".modal");t.classList.remove("open")})}),document.querySelectorAll(".jsBtnCloseDropdown").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),v.classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden");let t=document.querySelectorAll(".dropdown");_.classList.remove("open"),t.forEach(function(e){e.classList.remove("open")})})});let f;991<=window.screen.width?document.querySelectorAll(".main-menu__col").forEach(e=>{e.onmouseover=function(e){f=setTimeout(function(){e.target.classList.contains("main-menu__col")&&(document.querySelectorAll(".main-menu__col.active").forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active"))},100)},e.onmouseout=function(e){clearTimeout(f)}}):document.querySelector(".main-menu__col.active").remove("active"),document.querySelector(".jsCloseFilter")?.addEventListener("click",function(e){v.classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden"),document.querySelector(".jsFilters").classList.remove("open")}),document.querySelector(".jsBtnFilter")?.addEventListener("click",function(e){e.preventDefault(),v.classList.add("overflow-hidden"),document.querySelector("html").classList.add("overflow-hidden"),document.querySelector(".jsFilters").classList.add("open")});const y=document.querySelector(".jsMainMenu");document.querySelectorAll(".jsMenuButton").forEach(function(e){e.addEventListener("click",function(e){v.classList.toggle("menu-opened"),e.preventDefault(),m.forEach(function(e){e.classList.remove("open")}),v.classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden"),y.classList.toggle("open"),y.classList.contains("open")?(this.classList.remove("--svg__menu"),this.classList.add("--svg__menu_close")):(this.classList.add("--svg__menu"),this.classList.remove("--svg__menu_close"))})});document.querySelectorAll(".jsAddItemCart").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),t.nextElementSibling.classList.add("show")})}),window.screen.width<=768?(document.querySelector(".header__search").addEventListener("focus",function(){document.querySelector("body").classList.add("search-open"),document.querySelector("body").classList.add("overflow-hidden"),document.querySelector("html").classList.add("overflow-hidden")}),document.querySelector(".header__search-close").addEventListener("click",function(){document.querySelector("body").classList.remove("search-open"),document.querySelector("body").classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden")}),document.querySelector(".header__city").addEventListener("click",function(){document.querySelector(".dropdown__city").classList.add("open")}),document.querySelector(".dropdown__city-close").addEventListener("click",function(){document.querySelector(".dropdown__city").classList.remove("open"),document.querySelector(".dropdown__city").blur()})):(document.querySelector(".header__search").addEventListener("focus",function(){document.querySelector("body").classList.add("search-open"),document.querySelector("html").classList.add("overflow-hidden"),document.querySelector("body").classList.add("overflow-hidden")}),document.querySelector(".header__search").addEventListener("blur",function(){document.querySelector("body").classList.remove("search-open"),document.querySelector("html").classList.remove("overflow-hidden"),document.querySelector("body").classList.remove("overflow-hidden")}));var w=new Swiper(".gallery-thumbs",{slidesPerView:9,spaceBetween:16,direction:"vertical",wrapperClass:"gallery-thumbs__wrapper",slideClass:"gallery-thumbs__slide",watchSlidesVisibility:!0,watchSlidesProgress:!0,freeMode:!0,allowTouchMove:!1,navigation:{nextEl:".gallery-thumbs-next",prevEl:".gallery-thumbs-prev"},breakpoints:{0:{direction:"horizontal",slidesPerView:7,allowTouchMove:!0,spaceBetween:8},991:{direction:"vertical",slidesPerView:9,allowTouchMove:!1,spaceBetween:16}}});const L=new Swiper(".gallery-slider",{wrapperClass:"gallery-slider__wrapper",slideClass:"gallery-slider__slide",slidesPerView:1,navigation:{nextEl:".gallery-slide-next",prevEl:".gallery-slide-prev"},thumbs:{swiper:w}});document.querySelectorAll("[data-gallery]").forEach(t=>{t.addEventListener("click",function(){var e=t.getAttribute("data-gallery");L.slideTo(e)})});const g=document.querySelectorAll(".entry-car-selected__slider--desk");g.forEach((e,t)=>{new Swiper(e,{slidesPerView:"1",wrapperClass:"entry-car-selected__slider-wrapper",slideClass:"entry-car-selected__image",allowTouchMove:!0,slidesPerGroup:1,navigation:{nextEl:".entry-car-selected__slider-nav .product__slider-next",prevEl:".entry-car-selected__slider-nav .product__slider-prev"}})});const S=document.querySelectorAll(".entry-car-selected__slider--mob");function E(){let e=document.querySelectorAll(".modal");e.forEach(e=>{e.classList.remove("open")}),document.querySelector("body").classList.remove("overflow-hidden"),document.querySelector("html").classList.remove("overflow-hidden"),document.querySelector(".overlay").classList.remove("open"),document.querySelector(".jsAuthDropdown").classList.remove("open"),document.querySelector(".jsRegisterDropdown").classList.remove("open"),document.querySelector(".jsExpertDropdown").classList.remove("open"),document.querySelector(".header__search").blur(),document.querySelector("body").classList.remove("menu-opened"),document.querySelector(".jsMainMenu").classList.remove("open"),document.querySelectorAll(".jsMenuButton").forEach(e=>{e.classList.add("--svg__menu"),e.classList.remove("--svg__menu_close")}),document.querySelectorAll(".attention__content").forEach(e=>{e.classList.remove("active")})}S.forEach((e,t)=>{new Swiper(e,{slidesPerView:"1.1",wrapperClass:"entry-car-selected__slider-wrapper",slideClass:"entry-car-selected__slide",allowTouchMove:!0,slidesPerGroup:1,pagination:{el:".entry-car-selected__slider-pagination",renderBullet:function(e,t){return"<span class='product__slider-bullet "+t+"'></span>"},clickable:!0},breakpoints:{0:{slidesPerView:"1.15",allowTouchMove:!0},650:{slidesPerView:"2"}}})}),document.querySelectorAll(".form-validate").forEach(r=>{r.addEventListener("submit",e=>{e.preventDefault();let t=r.querySelectorAll("input"),o=!1;if(document.querySelectorAll(".input-error").forEach(e=>e.remove()),document.querySelectorAll(".invalid").forEach(e=>e.classList.remove("invalid")),t.forEach(e=>{e.hasAttribute("data-required")&&e.value.length<3&&!e.classList.contains("checkbox__input")?(o=!0,console.log(e.closest(".input-group")),window.screen.width<=768?e.insertAdjacentHTML("afterend","<p class='input-error'>Обязательное поле</p>"):e.closest(".input-group").insertAdjacentHTML("beforeend","<p class='input-error'>Обязательное поле</p>"),e.classList.add("invalid")):e.classList.contains("checkbox__input")&&!e.checked&&(o=!0,e.closest(".checkbox").classList.add("invalid"))}),o)return r.classList.contains("expertForm")?r.classList.add("error"):r.classList.contains("sto-service-form")?(h("Произошла ошибка при отправке, попробуйте позже","",!0),document.querySelector(".overlay").classList.add("sto-overlay")):(E(),h("Произошла ошибка при отправке, попробуйте позже","",!0)),!1;r.classList.contains("expertForm")?(document.querySelectorAll(".input-error").forEach(e=>e.remove()),document.querySelectorAll(".invalid").forEach(e=>e.classList.remove("invalid")),r.classList.add("success")):(document.querySelectorAll(".input-error").forEach(e=>e.remove()),document.querySelectorAll(".invalid").forEach(e=>e.classList.remove("invalid")),E(),h("Регистрация прошла успешно","Теперь вы можете добавить свой автомобиль и найти любые автозапчасти в 3 клика"))})}),document.querySelectorAll(".form-validate button").forEach(e=>{e.classList.contains("dropdown__close")&&e.classList.contains("--svg__eye_close")||e.addEventListener("click",function(){e.closest(".form-validate")})}),document.querySelectorAll(".jsToggleTypeButton").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();const t=this.querySelector(".modal__type-icon"),o=this.querySelector(".modal__type-icon").nextSibling,r=this.closest(".modal__content").querySelector(".modal__type-wrapper--content"),s=this.closest(".modal__content").querySelector(".modal__type-wrapper--map");t.classList.contains("--svg__pin")?(t.classList.remove("--svg__pin"),t.classList.add("--svg__list"),o.textContent="Списком",r.classList.remove("active"),s.classList.add("active")):(t.classList.remove("--svg__list"),t.classList.add("--svg__pin"),o.textContent="На карте",s.classList.remove("active"),r.classList.add("active"))})}),document.querySelectorAll(".filter-link").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t,o;o=this.classList.contains("parts-list__box")?".parts-list__overhead":this.classList.contains("filters-mob__item")?".filters-mob__items":this.classList.contains("order-list__item")?".list-overhead":".modal__overhead",t=this.closest(o).querySelectorAll(".filter-link"),t.forEach(e=>{e!==this&&(e.classList.remove("arrow-top"),e.classList.remove("arrow-bottom"))}),this.classList.contains("arrow-top")?(this.classList.remove("arrow-top"),this.classList.add("arrow-bottom")):(this.classList.contains("arrow-bottom")&&this.classList.remove("arrow-bottom"),this.classList.add("arrow-top"))})}),document.querySelectorAll(".anchor-link").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("href");document.querySelector(e).scrollIntoView()})}),document.onkeydown=function(e){e=e||window.event;let t=!1;t="key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode,t&&E()},document.querySelector(".overlay").addEventListener("click",function(e){E()}),document.querySelector(".js-state-form-back")?.addEventListener("click",function(){E()}),[].forEach.call(document.querySelectorAll('[type="tel"]'),function(e){let n;function t(e){e.keyCode&&(n=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+7 (___) ___ ____",o=0,r=t.replace(/\D/g,""),s=this.value.replace(/\D/g,""),l=t.replace(/[_\d]/g,function(e){return o<s.length?s.charAt(o++)||r.charAt(o):e});o=l.indexOf("_"),-1!=o&&(o<5&&(o=3),l=l.slice(0,o));let c=t.substring(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");c=new RegExp("^"+c+"$"),(!c.test(this.value)||this.value.length<5||47<n&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)}),window.screen.width<=768&&(document.querySelectorAll(".product-types__item").forEach(t=>{t.addEventListener("click",function(e){"A"!==e.target.tagName&&(t.classList.toggle("opened"),e=t.querySelector(".product-links").offsetHeight,t.classList.contains("opened")?t.style.marginBottom=e+"px":t.style.marginBottom="0px")}),t.querySelector(".mobile-only a")&&t.querySelector(".mobile-only a").addEventListener("click",function(e){e.preventDefault(),t.classList.remove("opened"),t.style.marginBottom="0px"})}),document.querySelectorAll(".share").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("opened")})}));const q=document.querySelectorAll(".rating .stars .star");q.forEach(r=>{r.addEventListener("click",function(e){e.preventDefault();var t=[...r.parentElement.children].indexOf(r);let o=r.closest(".rating").querySelectorAll(".star");o.forEach(e=>{e.classList.remove("star--fill")});for(let e=0;e<=t;e++)o[e].classList.add("star--fill")})});const b=document.querySelectorAll(".buttons-anim__input");b.forEach(e=>{e.oninput=function(){this.value=this.value.substring(0,2)}}),document.querySelector("#jsCartBtn").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".cart__popup").classList.add("opened")}),document.querySelector(".cart__popup .close").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".cart__popup").classList.remove("opened")}),document.querySelector(".header-notice svg").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".header-notice").classList.add("d-none")}),document.querySelectorAll(".map-type").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),t.closest(".modal__inner")&&t.closest(".modal__inner").classList.toggle("map-visible"),t.closest(".shops-list-wrapper")&&t.closest(".shops-list-wrapper").classList.toggle("map-visible")})}),document.querySelector(".promo-link")?.addEventListener("click",function(e){e.preventDefault(),this.remove(),document.querySelector(".cart__aside-promo").classList.remove("input-hidden"),document.querySelector(".cart__aside-discounts").classList.remove("cart__aside-discounts--hidden")});let k=document.querySelector(".tech-service__title-link");k&&(window.addEventListener("resize",function(e){window.screen.width<=991?(k.removeAttribute("data-popup"),k.setAttribute("data-popup","tech-service-popup-list")):(k.removeAttribute("data-popup"),k.setAttribute("data-popup","jsService"))},!0),window.screen.width<=991?(k.removeAttribute("data-popup"),k.setAttribute("data-popup","tech-service-popup-list")):(k.removeAttribute("data-popup"),k.setAttribute("data-popup","jsService")));let A=document.querySelector(".car-select-button");if(A&&A.addEventListener("click",function(e){e.preventDefault();let t=document.querySelector(".entry-car-select-none"),o=document.querySelector(".entry-car-selected");t.classList.add("hide"),o.classList.add("open")}),document.querySelectorAll(".custom-select").forEach(e=>{NiceSelect.bind(e)}),window.screen.width<=991&&(document.querySelectorAll("[data-attention-id]").forEach(e=>{var t=e.getAttribute("data-attention-id");let o=document.getElementById(t);document.querySelector("body").appendChild(o),e.addEventListener("click",function(e){o.classList.add("active"),document.querySelector("body").classList.add("overflow-hidden"),document.querySelector(".overlay").classList.add("open")})}),document.querySelectorAll(".attention__content .button").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),document.querySelector("body").classList.remove("overflow-hidden"),document.querySelector(".overlay").classList.remove("open"),t.closest(".attention__content").classList.remove("active")})})),document.querySelectorAll(".payment-delivery__content-left .shops-inner__ordering-filter li").forEach(t=>{t.addEventListener("click",function(e){t.classList.contains("payment-radio")&&(document.querySelector(".payment-delivery__list--payment").classList.add("payment-delivery__list-opened"),document.querySelector(".payment-delivery__list--delivery").classList.remove("payment-delivery__list-opened"),document.querySelector(".sale-banner").classList.add("visible")),t.classList.contains("delivery-radio")&&(document.querySelector(".payment-delivery__list--delivery").classList.add("payment-delivery__list-opened"),document.querySelector(".payment-delivery__list--payment").classList.remove("payment-delivery__list-opened"),document.querySelector(".sale-banner").classList.remove("visible"))})}),window.screen.width<991){const B=document.querySelectorAll(".profile__block-title");B.forEach(e=>{e.addEventListener("click",function(){const e=this.parentElement;e.classList.toggle("opened")})})}window.screen.width<=768&&new Swiper(".car-list__wrapper",{wrapperClass:"car-list",slideClass:"car-item",slidesPerView:1,pagination:{el:".car-list__wrapper .slider-pagination",type:"bullets"}});let x=document.querySelector(".cars__search .cars__search-form-input:nth-child(1) input"),P=document.querySelector(".cars__search .cars__search-form-input:nth-child(2)");x?.addEventListener("keyup",function(e){e.target.value.trim().length?P.classList.add("visible"):P.classList.remove("visible")}),document.querySelectorAll(".profile__tab-trigger").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("data-tab");document.querySelectorAll(".profile__tab-content").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".profile__tab-trigger").forEach(e=>e.classList.remove("active")),document.getElementById(e)?.classList.add("active"),t.classList.add("active")})}),document.querySelectorAll("[data-tab-name]").forEach(o=>{o.addEventListener("click",function(e){e.preventDefault();var t=o.getAttribute("data-tab-name"),e=o.getAttribute("data-tabs-index");document.querySelectorAll(`[data-tabs-index="${e}"]`).forEach(e=>e.classList.remove("active")),document.getElementById(t)?.classList.add("active"),o.classList.add("active")})}),document.querySelectorAll(".show-password").forEach(o=>{o.addEventListener("click",function(e){e.preventDefault();const t=o.closest(".input-group").querySelector(".input");console.log(t.type),"password"===t.type?t.type="text":t.type="password"})}),document.querySelector("#code-link")?.addEventListener("click",function(e){e.preventDefault(),768<window.screen.width?document.querySelector(".code-popup").classList.add("active"):(this.remove(),document.querySelector(".input-row.code").classList.add("active"))}),document.querySelectorAll(".input-popup .close").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),t.closest(".input-popup").classList.remove("active")})}),document.querySelectorAll(".sto-service-form .input-wrapper .input").forEach(s=>{s.addEventListener("click",function(e){document.querySelectorAll(".sto-service-form .input-wrapper .sto-service-form__dropdown").forEach(e=>{e&&e.classList.remove("show")}),document.querySelectorAll(".sto-service-form .input-wrapper input").forEach(e=>{e&&e.classList.remove("focus")});let t=this,o=s.nextElementSibling,r=s.parentElement;r.parentElement;o&&o.classList.add("show"),t.classList.add("focus"),o&&o.classList.contains("show")&&document.addEventListener("click",function(e){r.contains(e.target)||(o.classList.remove("show"),o.previousElementSibling.classList.remove("focus"))}),t&&t.classList.contains("focus")&&document.addEventListener("click",function(e){r.contains(e.target)||t.classList.remove("focus")}),o&&o.querySelectorAll(".sto-service-form__dropdown-item").forEach(e=>{e.addEventListener("click",function(){var e=this.innerText;t.value=e,o.classList.remove("show")})})})}),document.querySelectorAll(".sto-service-form .sto-service-form__toggle-button").forEach(t=>{t.addEventListener("click",function(e){t.previousElementSibling.classList.contains("shrink")?(t.previousElementSibling.classList.remove("shrink"),t.previousElementSibling.classList.add("expand"),t.querySelector(".sto-service-form__toggle-button__text").innerText="Короткая форма"):(t.previousElementSibling.classList.remove("expand"),t.previousElementSibling.classList.add("shrink"),t.querySelector(".sto-service-form__toggle-button__text").innerText="Подробная форма")})}),document.querySelectorAll("#part-search-trigger").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault,console.log("click"),document.querySelectorAll(".seach-popup-main").forEach(e=>{e.classList.add("open")})})}),document.querySelectorAll(".seach-popup-main .dropdown__close-icon").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault,document.querySelectorAll(".seach-popup-main").forEach(e=>{e.classList.remove("open")})})}),document.querySelectorAll(".returns__accordion-hint .hint-title").forEach(o=>{o.addEventListener("click",function(e){e.preventDefault();const t=o.closest(".returns__accordion-hint");t.classList.toggle("opened")})}),document.querySelectorAll("#part-search-trigger").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault;let o=this;document.querySelectorAll(".seach-popup-main").forEach(t=>{t.classList.add("open"),document.addEventListener("click",function(e){document.querySelector(".seach-popup-main.open");t.contains(e.target)||o.contains(e.target)||t.classList.remove("open")})})})});document.querySelectorAll(".sto-slider .shops-inner__list");p.forEach((e,t)=>{new Swiper(e,{slidesPerView:"auto",allowTouchMove:!1,loop:!0,slideToClickedSlide:!0,slideClass:"shops-inner__ordering-filter-item",wrapperClass:"shops-inner__ordering-filter",navigation:{nextEl:".shops-inner__next-el"},breakpoints:{0:{spaceBetween:31},992:{spaceBetween:0}}})});let C=0;document.querySelectorAll(".sto-service-form .input-wrapper .input").forEach(s=>{s.addEventListener("click",function(e){C++,console.log(C);let t=this,o=s.parentElement,r=o.querySelector(".sto-service-form__dropdown");o.parentElement;if(t.classList.contains("focus")&&2==C&&null!=r)return t.classList.remove("focus"),r.classList.remove("show"),void(C=0);document.querySelectorAll(".sto-service-form .input-wrapper .sto-service-form__dropdown").forEach(e=>{e&&(e.classList.remove("show"),C=1)}),document.querySelectorAll(".sto-service-form .input-wrapper input").forEach(e=>{e&&e.classList.remove("focus")}),r&&r.classList.add("show"),t.classList.add("focus"),r&&r.classList.contains("show")&&document.addEventListener("click",function(e){o.contains(e.target)||(r.classList.remove("show"),r.previousElementSibling.classList.remove("focus"))}),t&&t.classList.contains("focus")&&document.addEventListener("click",function(e){o.contains(e.target)||t.classList.remove("focus")}),r&&r.querySelectorAll(".sto-service-form__dropdown-item").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault;e=this.innerText;t.value=e,r.classList.remove("show")})})})})});