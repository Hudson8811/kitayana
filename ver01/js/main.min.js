"use strict";

document.addEventListener("DOMContentLoaded", function () {
  function e(e, t) {
    e.classList.contains("open") ? t.style.maxHeight = t.scrollHeight + "px" : t.style.maxHeight = null, e.addEventListener("click", function (s) {
      s.preventDefault(), e.classList.toggle("open"), e.classList.contains("open") ? t.style.maxHeight = t.scrollHeight + "px" : t.style.maxHeight = null;
    });
  }

  var t = document.querySelectorAll(".accordion"),
      s = document.querySelectorAll(".filters__box");
  t.forEach(function (t) {
    var s = t.querySelector(".accordion__content");
    e(t, s);
  }), s.forEach(function (t) {
    var s = t.closest(".filters__item").querySelector(".filters__content");
    e(t, s);
  });
  new Swiper(".swiper-spares", {
    direction: "horizontal",
    slidesPerView: "auto",
    breakpoints: {
      320: {
        spaceBetween: 16
      },
      576: {
        spaceBetween: 40
      }
    }
  });
  ymaps.ready(function () {
    new ymaps.Map("map", {
      center: [55.76, 37.64],
      zoom: 7
    }), new ymaps.Map("map-shops", {
      center: [55.76, 37.64],
      zoom: 7
    });
  }), window.addEventListener("scroll", function () {
    this.pageYOffset > 140 ? document.querySelector(".header").classList.add("fixed") : document.querySelector(".header").classList.remove("fixed");
  }), $(".js-range-slider").ionRangeSlider({
    type: "double",
    min: 0,
    max: 1e3,
    from: 0,
    to: 500,
    hide_min_max: !0,
    hide_from_to: !0,
    onChange: function onChange(e) {
      $(".jsPriceFrom").val(e.from), $(".jsPriceTo").val(e.to);
    }
  });
  var o = document.querySelectorAll(".jsBtnCloseDropdown"),
      n = document.querySelectorAll(".dropdown"),
      c = document.querySelector(".jsExpertButton"),
      r = document.querySelector(".jsExpertDropdown"),
      l = document.querySelector(".jsAuthButton"),
      i = document.querySelector(".jsButtonCars"),
      a = document.querySelector(".jsCarsDropdown"),
      d = document.querySelector(".jsButtonFavourite"),
      u = document.querySelector(".jsFavouriteDropdown"),
      m = document.querySelector(".jsBasketButton"),
      v = document.querySelector(".jsBasketDropdown"),
      p = document.querySelector("body");

  function L() {
    n.forEach(function (e) {
      e.classList.remove("open");
    }), p.classList.remove("overflow-hidden"), l.classList.remove("active"), c.classList.remove("active"), i.classList.remove("active"), d.classList.remove("active"), m.classList.remove("active");
  }

  function f(e, t) {
    e.addEventListener("click", function (s) {
      s.preventDefault(), L(), p.classList.add("overflow-hidden"), e.classList.add("active"), t.classList.toggle("open");
    });
  }

  l.addEventListener("click", function (e) {
    e.preventDefault(), L(), p.classList.add("overflow-hidden"), document.querySelector(".jsAuthDropdown").classList.toggle("open"), this.classList.add("active");
  }), o.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), l.classList.contains("active") && l.classList.remove("active"), c.classList.contains("active") && c.classList.remove("active"), L();
    });
  }), f(c, r), f(i, a), f(d, u), f(m, v), document.querySelector(".jsBtnFilter").addEventListener("click", function (e) {
    e.preventDefault(), p.classList.add("overflow-hidden"), document.querySelector(".jsFilters").classList.add("open");
  }), document.querySelector(".jsCloseFilter").addEventListener("click", function (e) {
    p.classList.remove("overflow-hidden"), document.querySelector(".jsFilters").classList.remove("open");
  });
  var h = document.querySelector(".jsMainMenu");
  document.querySelectorAll(".jsMenuButton").forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), L(), h.classList.toggle("open"), h.classList.contains("open") ? (this.classList.remove("--svg__menu"), this.classList.add("--svg__menu_close"), p.classList.add("overflow-hidden")) : (this.classList.add("--svg__menu"), this.classList.remove("--svg__menu_close"), p.classList.remove("overflow-hidden"));
    });
  });
  var y = 0;
  var S = document.querySelectorAll(".counter__icon.plus"),
      q = document.querySelectorAll(".counter__icon.minus");
  S.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), y++, this.previousElementSibling.value = y;
    });
  }), q.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault();
      var t = this.nextElementSibling;
      y > 0 && (y--, t.value = y);
    });
  });
  document.querySelectorAll(".jsAddItemCart").forEach(function (e) {
    e.addEventListener("click", function (t) {
      t.preventDefault();
      e.nextElementSibling.classList.add("show");
    });
  }), document.querySelector(".jsRegisterButton").addEventListener("click", function (e) {
    e.preventDefault(), p.classList.add("overflow-hidden"), document.querySelector(".jsAuthDropdown").classList.remove("open"), document.querySelector(".jsRegisterDropdown").classList.add("open");
  });
});