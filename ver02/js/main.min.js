"use strict";

document.addEventListener("DOMContentLoaded", function () {
  function e(e, t) {
    e.classList.contains("open") ? t.style.maxHeight = t.scrollHeight + "px" : t.style.maxHeight = null, e.addEventListener("click", function (s) {
      s.preventDefault(), e.classList.toggle("open"), e.classList.contains("open") ? t.style.maxHeight = t.scrollHeight + "px" : t.style.maxHeight = null;
    });
  }

  var t = document.querySelectorAll(".accordion"),
      s = document.querySelectorAll(".filters__box");
  t.forEach(function (t) {
    var s = t.querySelector(".accordion__content");
    e(t, s);
  }), s.forEach(function (t) {
    var s = t.closest(".filters__item").querySelector(".filters__content");
    e(t, s);
  });
  new Swiper(".swiper-spares", {
    direction: "horizontal",
    slidesPerView: "auto",
    breakpoints: {
      320: {
        spaceBetween: 16
      },
      576: {
        spaceBetween: 40
      }
    }
  });
  new Swiper(".car-service-slider", {
    direction: "horizontal",
    slidesPerView: "auto",
    spaceBetween: 16
  });
  var o = {
    center: [55.76, 37.64],
    zoom: 7
  };
  ymaps.ready(function () {
    new ymaps.Map("map", {
      center: [55.76, 37.64],
      zoom: 7
    }), new ymaps.Map("map-shops", o);
    new ymaps.Map("map-modal", o), new ymaps.Map("map-modal-mob", o), new ymaps.Map("map-modal-shop", o), new ymaps.Map("map-modal-stock", o);
  }), window.addEventListener("scroll", function () {
    this.pageYOffset > 140 ? document.querySelector(".header").classList.add("fixed") : document.querySelector(".header").classList.remove("fixed");
  }), $(".js-range-slider").ionRangeSlider({
    type: "double",
    min: 0,
    max: 1e3,
    from: 0,
    to: 500,
    hide_min_max: !0,
    hide_from_to: !0,
    onChange: function onChange(e) {
      $(".jsPriceFrom").val(e.from), $(".jsPriceTo").val(e.to);
    }
  });
  var c = document.querySelectorAll(".jsBtnCloseDropdown"),
      n = document.querySelectorAll(".dropdown"),
      r = document.querySelector(".jsExpertButton"),
      l = document.querySelector(".jsExpertDropdown"),
      a = document.querySelector(".jsAuthButton"),
      i = document.querySelector(".jsButtonCars"),
      d = document.querySelector(".jsCarsDropdown"),
      u = document.querySelector(".jsButtonFavourite"),
      m = document.querySelector(".jsFavouriteDropdown"),
      v = document.querySelector(".jsBasketButton"),
      p = document.querySelector(".jsBasketDropdown"),
      L = document.querySelector("body");

  function y() {
    n.forEach(function (e) {
      e.classList.remove("open");
    }), L.classList.remove("overflow-hidden"), a.classList.remove("active"), r.classList.remove("active"), i.classList.remove("active"), u.classList.remove("active"), v.classList.remove("active");
  }

  function S(e, t) {
    e.addEventListener("click", function (s) {
      s.preventDefault(), y(), L.classList.add("overflow-hidden"), e.classList.add("active"), t.classList.toggle("open");
    });
  }

  a.addEventListener("click", function (e) {
    e.preventDefault(), y(), L.classList.add("overflow-hidden"), document.querySelector(".jsAuthDropdown").classList.toggle("open"), this.classList.add("active");
  }), c.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), a.classList.contains("active") && a.classList.remove("active"), r.classList.contains("active") && r.classList.remove("active"), y();
    });
  }), S(r, l), S(i, d), S(u, m), S(v, p), document.querySelector(".jsBtnFilter").addEventListener("click", function (e) {
    e.preventDefault(), L.classList.add("overflow-hidden"), document.querySelector(".jsFilters").classList.add("open");
  }), document.querySelector(".jsCloseFilter").addEventListener("click", function (e) {
    L.classList.remove("overflow-hidden"), document.querySelector(".jsFilters").classList.remove("open");
  });
  var f = document.querySelector(".jsMainMenu");
  document.querySelectorAll(".jsMenuButton").forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), y(), f.classList.toggle("open"), f.classList.contains("open") ? (this.classList.remove("--svg__menu"), this.classList.add("--svg__menu_close"), L.classList.add("overflow-hidden")) : (this.classList.add("--svg__menu"), this.classList.remove("--svg__menu_close"), L.classList.remove("overflow-hidden"));
    });
  });
  var h = 0;

  var q = document.querySelectorAll(".counter__icon.plus"),
      _ = document.querySelectorAll(".counter__icon.minus");

  q.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), h++, this.previousElementSibling.value = h;
    });
  }), _.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault();
      var t = this.nextElementSibling;
      h > 0 && (h--, t.value = h);
    });
  });
  document.querySelectorAll(".jsAddItemCart").forEach(function (e) {
    e.addEventListener("click", function (t) {
      t.preventDefault();
      e.nextElementSibling.classList.add("show");
    });
  }), document.querySelector(".jsRegisterButton").addEventListener("click", function (e) {
    e.preventDefault(), L.classList.add("overflow-hidden"), document.querySelector(".jsAuthDropdown").classList.remove("open"), document.querySelector(".jsRegisterDropdown").classList.add("open");
  });
  var w = document.querySelector(".overlay"),
      g = document.querySelector(".jsInStockButton"),
      j = document.querySelector(".jsInStockModal"),
      E = document.querySelectorAll(".jsButtonCloseModal"),
      k = document.querySelector(".jsInStockShopButton"),
      D = document.querySelector(".jsInStockShopModal");

  function B(e, t) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), L.classList.add("overflow-hidden"), w.classList.add("open"), t.classList.add("open");
    });
  }

  B(g, j), B(k, D), B(document.querySelector(".jsSuppliersButton"), document.querySelector(".jsSuppliersModal")), B(document.querySelector(".jsOnOrderButton"), document.querySelector(".jsOnOrderModal")), E.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), L.classList.remove("overflow-hidden");
      var t = document.querySelectorAll(".modal");
      w.classList.remove("open"), t.forEach(function (e) {
        e.classList.remove("open");
      });
    });
  });
  document.querySelectorAll(".jsToggleTypeButton").forEach(function (e) {
    e.addEventListener("click", function (e) {
      console.log("test1332"), e.preventDefault();
      var t = this.querySelector(".modal__type-icon"),
          s = this.querySelector("span"),
          o = this.closest(".modal__content").querySelector(".modal__type-wrapper--content"),
          c = this.closest(".modal__content").querySelector(".modal__type-wrapper--map");
      t.classList.contains("--svg__list") ? (t.classList.remove("--svg__list"), t.classList.add("--svg__pin"), s.textContent = "На карте", o.classList.remove("active"), c.classList.add("active")) : (t.classList.remove("--svg__pin"), t.classList.add("--svg__list"), s.textContent = "списком", c.classList.remove("active"), o.classList.add("active"));
    });
  });
});